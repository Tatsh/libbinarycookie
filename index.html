<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bincookie: bincookie</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/SVG"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bincookie<span id="projectnumber">&#160;v0.1.3</span>
   </div>
   <div id="projectbrief">A library to parse Apple&#39;s binarycookies format.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">bincookie </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> <a href="https://github.com/Tatsh/bincookie/actions/workflows/qa.yml"><img src="https://github.com/Tatsh/bincookie/actions/workflows/qa.yml/badge.svg" alt="QA" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/Tatsh/bincookie/actions/workflows/tests.yml"><img src="https://github.com/Tatsh/bincookie/actions/workflows/tests.yml/badge.svg" alt="Tests" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/Tatsh/bincookie?branch=master"><img src="https://coveralls.io/repos/github/Tatsh/bincookie/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <img src="https://img.shields.io/github/v/tag/Tatsh/bincookie" alt="GitHub tag (with filter)" class="inline"/> <img src="https://img.shields.io/github/license/Tatsh/bincookie" alt="GitHub" class="inline"/> <img src="https://img.shields.io/github/commits-since/Tatsh/bincookie/v0.1.3/master" alt="GitHub commits since latest release (by SemVer including pre-releases)" class="inline"/></p>
<p>Apple has their own special binary cookie format, undocumented, in use on both OS X and heavily on iOS.</p>
<h1>How to build</h1>
<p>There is no build process for this library on its own. Just include the header:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="bincookie_8h.html">bincookie.h</a>&gt;</span></div>
<div class="ttc" id="abincookie_8h_html"><div class="ttname"><a href="bincookie_8h.html">bincookie.h</a></div><div class="ttdoc">A parser for Apple's proprietary binary cookie storage format.</div></div>
</div><!-- fragment --><h1>Installation</h1>
<h2>Header-only</h2>
<p>Just copy <code><a class="el" href="bincookie_8h.html" title="A parser for Apple&#39;s proprietary binary cookie storage format.">bincookie.h</a></code> to somewhere in your project and include it.</p>
<p>Package maintainers: if you do not want the example binary and do not want to have to install CMake, you only need to place <code><a class="el" href="bincookie_8h.html" title="A parser for Apple&#39;s proprietary binary cookie storage format.">bincookie.h</a></code> in a standard include directory such as <code>/usr/include</code>.</p>
<h2>CMake</h2>
<p>Install CMake and make sure it is in <code>PATH</code>. Then in your terminal:</p>
<ol type="1">
<li><code>git clone <a href="https://github.com/Tatsh/bincookie.git">https://github.com/Tatsh/bincookie.git</a></code></li>
<li><code>cd bincookie</code></li>
<li><code>mkdir build</code></li>
<li><code>cmake -DCMAKE_INSTALL_PREFIX=&lt;prefix&gt; -DCMAKE_BUILD_TYPE=RelWithDebInfo</code></li>
<li><code>make install</code></li>
</ol>
<p>To build the examples, add <code>-DWITH_EXAMPLES=ON</code> to step 4.</p>
<p>To build the documentation with Doxygen, add <code>-DWITH_DOCS=ON</code> to step 4.</p>
<p>To run tests, build with <code>-DWITH_TESTS=ON</code> and run <code>ctest</code> after building. CMocka must be installed to build tests.</p>
<p>Replace <code>&lt;prefix&gt;</code> with a value like <code>/usr/local</code>, <code>/usr/</code>, or <code>/opt/local</code> (MacPorts).</p>
<h1>Functions</h1>
<p>Be sure to <code>#include &lt;<a class="el" href="bincookie_8h.html" title="A parser for Apple&#39;s proprietary binary cookie storage format.">bincookie.h</a>&gt;</code> (which is installed with <code>make install</code>).</p>
<p><code><a class="el" href="bincookie_8h.html#structbincookie__t" title="bincookie file structure.">bincookie_t</a> *const <a class="el" href="bincookie_8h.html#a23ccffd12450da23e88cdc58b0977f22" title="Read a binarycookies file.">bincookie_init_path(const char *file_path)</a></code> - Initialise a <code><a class="el" href="bincookie_8h.html#structbincookie__t" title="bincookie file structure.">bincookie_t</a></code> type.</p>
<p><code><a class="el" href="bincookie_8h.html#structbincookie__t" title="bincookie file structure.">bincookie_t</a> *const <a class="el" href="bincookie_8h.html#a1de1ca6e2fa6ccd38d783bfaf548f4d5" title="Read a binarycookies file.">bincookie_init_file(FILE *fin)</a></code> - Initialise a <code><a class="el" href="bincookie_8h.html#structbincookie__t" title="bincookie file structure.">bincookie_t</a></code> type with an open file handle.</p>
<p><code><a class="el" href="bincookie_8h.html#structbincookie__page__t" title="Cookie page structure. A page can consist of 1 or more cookies.">bincookie_page_t</a> *const <a class="el" href="bincookie_8h.html#a12d2348fa4b8face7feeb5e12b816f97" title="Iterate pages of a binarycookies file.">bincookie_iter_pages(const bincookie_t *bc, bincookie_iter_state_t *const state)</a></code> Iterate pages of a file.</p>
<p><code><a class="el" href="bincookie_8h.html#structbincookie__cookie__t" title="Cookie data structure.">bincookie_cookie_t</a> *const <a class="el" href="bincookie_8h.html#adc4400de62abbee934cecd1ad26cdb8b" title="Iterate cookies of a page.">bincookie_iter_cookies(const bincookie_page_t *page, unsigned int *cookie_index)</a></code> Iterate cookies contained within a page. <code>cookie_index</code> must be set to 0 before calling this (including in between iteration of pages).</p>
<h1>Macros</h1>
<p><code>bool <a class="el" href="bincookie_8h.html#ab5d925cbecddbc14d7a305b53a675e06">bincookie_is_secure(bincookie_cookie_t *cookie)</a></code> - Test if a cookie has secure bit set.</p>
<p><code>bool <a class="el" href="bincookie_8h.html#aec8a5a5e91b63220c997be70f54f2664" title="Check if a cookie can be used on all subdomains of its original domain.">bincookie_domain_access_full(bincookie_cookie_t *cookie)</a></code> - Test if a cookie can be used by all subdomains.</p>
<p><code>char *bincookie_domain(<a class="el" href="bincookie_8h.html#structbincookie__cookie__t" title="Cookie data structure.">bincookie_cookie_t</a> *cookie)</code> - Get the domain name for a cookie.</p>
<p><code>char *bincookie_path(<a class="el" href="bincookie_8h.html#structbincookie__cookie__t" title="Cookie data structure.">bincookie_cookie_t</a> *cookie)</code> - Get the path for a cookie.</p>
<p><code>char *bincookie_name(<a class="el" href="bincookie_8h.html#structbincookie__cookie__t" title="Cookie data structure.">bincookie_cookie_t</a> *cookie)</code> - Get the name of a cookie.</p>
<p><code>char *bincookie_value(<a class="el" href="bincookie_8h.html#structbincookie__cookie__t" title="Cookie data structure.">bincookie_cookie_t</a> *cookie)</code> - Get the value of a cookie.</p>
<p><code>double <a class="el" href="bincookie_8h.html#aba2f504605a6632ce79040b43d426c02" title="Get the expiration time of a cookie.">bincookie_expiration_time(bincookie_cookie_t *cookie)</a></code> - Get the expiration time of a cookie as UNIX timestamp.</p>
<p><code>double <a class="el" href="bincookie_8h.html#a5c5f85d07d3bcda71e7cd8c9357f7b6c" title="Get the creation time of a cookie.">bincookie_creation_time(bincookie_cookie_t *cookie)</a></code> - Get the creation time of a cookie as a UNIX timestamp.</p>
<p><code>void <a class="el" href="bincookie_8h.html#a5063ee19f45e450a3cb90f1f7d0fa809" title="Initialise a bincookie_iter_state_t structure.">bincookie_iter_state_init(bincookie_iter_state_t s)</a></code> - Use this to zero a <code><a class="el" href="bincookie_8h.html#structbincookie__iter__state__t" title="Keeps track of iteration state when iterating cookie file pages.">bincookie_iter_state_t</a></code> structure.</p>
<h1>Flag enum</h1>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line">    <a class="code hl_enumvalue" href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75ea9a4df3f19eb3ea308da665ba9135afe4">secure</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75ea07075f7a0beaf8ee98f70c04ba3fbe45">http_only</a>,</div>
<div class="line">} <a class="code hl_enumeration" href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75e">bincookie_flag</a>;</div>
<div class="ttc" id="abincookie_8h_html_af3f6d6d79371a0933a01f25118b5e75e"><div class="ttname"><a href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75e">bincookie_flag</a></div><div class="ttdeci">bincookie_flag</div><div class="ttdoc">Security enabled for a cookie.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00103">bincookie.h:103</a></div></div>
<div class="ttc" id="abincookie_8h_html_af3f6d6d79371a0933a01f25118b5e75ea07075f7a0beaf8ee98f70c04ba3fbe45"><div class="ttname"><a href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75ea07075f7a0beaf8ee98f70c04ba3fbe45">http_only</a></div><div class="ttdeci">@ http_only</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00105">bincookie.h:105</a></div></div>
<div class="ttc" id="abincookie_8h_html_af3f6d6d79371a0933a01f25118b5e75ea9a4df3f19eb3ea308da665ba9135afe4"><div class="ttname"><a href="bincookie_8h.html#af3f6d6d79371a0933a01f25118b5e75ea9a4df3f19eb3ea308da665ba9135afe4">secure</a></div><div class="ttdeci">@ secure</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00104">bincookie.h:104</a></div></div>
</div><!-- fragment --><p>The value that stores whether or not a cookie is secure, HTTP-only, or any of these combinations is a single 32-bit integer, with 0 or more values OR'd together (<code>0</code> is the default value). To test for a particular property, such as HTTP-only, use the <code>&amp;</code> operator: <code>cookie-&gt;flags &amp; http_only</code>.</p>
<h1>Example use</h1>
<h1>Access all the cookie names in a file</h1>
<div class="fragment"><div class="line"><a class="code hl_struct" href="bincookie_8h.html#structbincookie__t">bincookie_t</a> *bc = <a class="code hl_function" href="bincookie_8h.html#a23ccffd12450da23e88cdc58b0977f22">bincookie_init_path</a>(<span class="stringliteral">&quot;Cookies.binarycookies&quot;</span>);</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j;</div>
<div class="line"><a class="code hl_struct" href="bincookie_8h.html#structbincookie__page__t">bincookie_page_t</a> *page;</div>
<div class="line"><a class="code hl_struct" href="bincookie_8h.html#structbincookie__cookie__t">bincookie_cookie_t</a> *cookie;</div>
<div class="line"><a class="code hl_struct" href="bincookie_8h.html#structbincookie__iter__state__t">bincookie_iter_state_t</a> state;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cookie_index = 0;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_define" href="bincookie_8h.html#a5063ee19f45e450a3cb90f1f7d0fa809">bincookie_iter_state_init</a>(state);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span> ((page = <a class="code hl_function" href="bincookie_8h.html#a12d2348fa4b8face7feeb5e12b816f97">bincookie_iter_pages</a>(bc, &amp;state)) != NULL) {</div>
<div class="line">    <span class="keywordflow">while</span> ((cookie = <a class="code hl_function" href="bincookie_8h.html#adc4400de62abbee934cecd1ad26cdb8b">bincookie_iter_cookies</a>(page, &amp;cookie_index)) != NULL) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Name: %s\n&quot;</span>, <a class="code hl_define" href="bincookie_8h.html#a2d4810107a1a0cf14731348d0f3a8494">bincookie_name</a>(cookie));</div>
<div class="line">    }</div>
<div class="line">    cookie_index = 0; <span class="comment">// yes this is necessary</span></div>
<div class="line">}</div>
<div class="ttc" id="abincookie_8h_html_a12d2348fa4b8face7feeb5e12b816f97"><div class="ttname"><a href="bincookie_8h.html#a12d2348fa4b8face7feeb5e12b816f97">bincookie_iter_pages</a></div><div class="ttdeci">static bincookie_page_t *const bincookie_iter_pages(const bincookie_t *bc, bincookie_iter_state_t *const state)</div><div class="ttdoc">Iterate pages of a binarycookies file.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00203">bincookie.h:203</a></div></div>
<div class="ttc" id="abincookie_8h_html_a23ccffd12450da23e88cdc58b0977f22"><div class="ttname"><a href="bincookie_8h.html#a23ccffd12450da23e88cdc58b0977f22">bincookie_init_path</a></div><div class="ttdeci">static bincookie_t *const bincookie_init_path(const char *file_path)</div><div class="ttdoc">Read a binarycookies file.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00188">bincookie.h:188</a></div></div>
<div class="ttc" id="abincookie_8h_html_a2d4810107a1a0cf14731348d0f3a8494"><div class="ttname"><a href="bincookie_8h.html#a2d4810107a1a0cf14731348d0f3a8494">bincookie_name</a></div><div class="ttdeci">#define bincookie_name(c)</div><div class="ttdoc">Get the name of a cookie.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00077">bincookie.h:74</a></div></div>
<div class="ttc" id="abincookie_8h_html_a5063ee19f45e450a3cb90f1f7d0fa809"><div class="ttname"><a href="bincookie_8h.html#a5063ee19f45e450a3cb90f1f7d0fa809">bincookie_iter_state_init</a></div><div class="ttdeci">#define bincookie_iter_state_init(s)</div><div class="ttdoc">Initialise a bincookie_iter_state_t structure.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00056">bincookie.h:52</a></div></div>
<div class="ttc" id="abincookie_8h_html_adc4400de62abbee934cecd1ad26cdb8b"><div class="ttname"><a href="bincookie_8h.html#adc4400de62abbee934cecd1ad26cdb8b">bincookie_iter_cookies</a></div><div class="ttdeci">static bincookie_cookie_t *const bincookie_iter_cookies(const bincookie_page_t *page, unsigned int *i)</div><div class="ttdoc">Iterate cookies of a page.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00222">bincookie.h:222</a></div></div>
<div class="ttc" id="abincookie_8h_html_structbincookie__cookie__t"><div class="ttname"><a href="bincookie_8h.html#structbincookie__cookie__t">bincookie_cookie_t</a></div><div class="ttdoc">Cookie data structure.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00115">bincookie.h:115</a></div></div>
<div class="ttc" id="abincookie_8h_html_structbincookie__iter__state__t"><div class="ttname"><a href="bincookie_8h.html#structbincookie__iter__state__t">bincookie_iter_state_t</a></div><div class="ttdoc">Keeps track of iteration state when iterating cookie file pages.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00109">bincookie.h:109</a></div></div>
<div class="ttc" id="abincookie_8h_html_structbincookie__page__t"><div class="ttname"><a href="bincookie_8h.html#structbincookie__page__t">bincookie_page_t</a></div><div class="ttdoc">Cookie page structure. A page can consist of 1 or more cookies.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00133">bincookie.h:133</a></div></div>
<div class="ttc" id="abincookie_8h_html_structbincookie__t"><div class="ttname"><a href="bincookie_8h.html#structbincookie__t">bincookie_t</a></div><div class="ttdoc">bincookie file structure.</div><div class="ttdef"><b>Definition</b> <a href="bincookie_8h_source.html#l00141">bincookie.h:141</a></div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
